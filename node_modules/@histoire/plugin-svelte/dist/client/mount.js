import{components as f}from"@histoire/controls";import{defineComponent as m,h as c,ref as l,watch as y,onMounted as p,onUnmounted as v}from"@histoire/vendors/vue";import*as t from"virtual:$histoire-generated-global-setup";import*as o from"virtual:$histoire-setup";import d from"./MountStory.svelte.js";import S from"./MountVariant.svelte.js";import w from"./Stub.svelte.js";const O=m({name:"MountStory",props:{story:{type:Object,required:!0}},setup(e){const s=l();let i,n;async function u(){n=document.createElement("div"),s.value.appendChild(n),i=new e.story.file.component({target:n,props:{Hst:{Story:d,Variant:S,...h()}},context:new Map(Object.entries({__hstStory:e.story}))});const r={app:i,story:e.story,variant:null};typeof(t==null?void 0:t.setupSvelte3)=="function"&&await t.setupSvelte3(r),typeof(o==null?void 0:o.setupSvelte3)=="function"&&await o.setupSvelte3(r),typeof(t==null?void 0:t.setupSvelte4)=="function"&&await t.setupSvelte3(r),typeof(o==null?void 0:o.setupSvelte4)=="function"&&await o.setupSvelte3(r)}function a(){var r;i==null||i.$destroy(),n&&((r=n.parentNode)==null||r.removeChild(n),n=null)}return y(()=>e.story.id,async()=>{a(),await u()}),p(async()=>{await u()}),v(()=>{a()}),{el:s}},render(){return c("div",{ref:"el"})}});function h(){const e={};for(const s in f)e[s.substring(3)]=w;return e}export{O as default};
