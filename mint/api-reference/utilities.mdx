---
title: 'Utilities API'
description: 'API reference for utility functions and helpers'
---

# Utilities API Reference

Comprehensive API documentation for all utility functions, helpers, and tools provided by Bubble Tea Party.

## Motion Utilities

### glassFade

Smooth fade transition with glass morphism effects.

```typescript
function glassFade(
  node: Element, 
  params: {
    duration?: number
    easing?: string
    opacity?: number
    blur?: number
  }
): TransitionConfig
```

**Parameters:**
- `duration` - Animation duration in milliseconds (default: 600)
- `easing` - CSS easing function (default: 'cubic-bezier(0.4, 0, 0.2, 1)')
- `opacity` - Target opacity (default: 0)
- `blur` - Blur amount in pixels (default: 10)

---

### jellyMotion

Bouncy, elastic motion for interactive elements.

```typescript
function jellyMotion(
  node: Element,
  params: {
    strength?: number
    duration?: number
    trigger?: 'hover' | 'click' | 'focus'
  }
): ActionReturn
```

**Parameters:**
- `strength` - Motion intensity (0-1, default: 0.5)
- `duration` - Animation duration (default: 400ms)
- `trigger` - Event trigger (default: 'hover')

---

### magneticHover

Mouse-following magnetic attraction effects.

```typescript
function magneticHover(
  node: Element,
  params: {
    strength?: number
    radius?: number
    resetDelay?: number
  }
): ActionReturn
```

**Parameters:**
- `strength` - Magnetic strength (0-1, default: 0.3)
- `radius` - Attraction radius in pixels (default: 100)
- `resetDelay` - Reset delay in milliseconds (default: 300)

---

## Responsive Utilities

### useBreakpoint

Hook for responsive breakpoint detection.

```typescript
function useBreakpoint(): Readable<BreakpointName>

type BreakpointName = 'xs' | 'sm' | 'md' | 'lg' | 'xl' | 'xxl'
```

**Returns:** Svelte store containing current breakpoint name

**Example:**
```svelte
<script>
  import { useBreakpoint } from 'bubble-tea-party/responsive'
  
  const breakpoint = useBreakpoint()
  $: isMobile = $breakpoint === 'xs' || $breakpoint === 'sm'
</script>
```

---

### useMediaQuery

Hook for custom media query detection.

```typescript
function useMediaQuery(query: string): Readable<boolean>
```

**Parameters:**
- `query` - CSS media query string

**Returns:** Svelte store containing boolean match result

**Example:**
```svelte
<script>
  import { useMediaQuery } from 'bubble-tea-party/responsive'
  
  const isLargeScreen = useMediaQuery('(min-width: 1024px)')
  const prefersReducedMotion = useMediaQuery('(prefers-reduced-motion: reduce)')
</script>
```

---

## Accessibility Utilities

### focusManager

Utilities for managing focus states and navigation.

```typescript
interface FocusManager {
  trapFocus(selector: string): void
  restoreFocus(): void
  setFocusable(element: Element, focusable: boolean): void
  getNextFocusable(current: Element): Element | null
  getPreviousFocusable(current: Element): Element | null
}
```

**Methods:**
- `trapFocus(selector)` - Trap focus within container
- `restoreFocus()` - Return focus to previous element
- `setFocusable(element, focusable)` - Make element focusable/unfocusable
- `getNextFocusable(current)` - Get next focusable element
- `getPreviousFocusable(current)` - Get previous focusable element

---

### announcer

Screen reader announcement utilities.

```typescript
interface Announcer {
  announce(message: string, priority?: 'polite' | 'assertive'): void
  clear(): void
}
```

**Methods:**
- `announce(message, priority)` - Announce message to screen readers
- `clear()` - Clear announcement queue

---

## Theme Utilities

### createTheme

Create custom theme objects.

```typescript
function createTheme(config: Partial<Theme>): Theme

interface Theme {
  name: string
  id: string
  colors: ThemeColors
  effects: ThemeEffects
  typography: ThemeTypography
  spacing: ThemeSpacing
  radius: ThemeRadius
  shadows: ThemeShadows
  motion: ThemeMotion
}
```

**Example:**
```javascript
import { createTheme } from 'bubble-tea-party/theme'

const myTheme = createTheme({
  name: 'Custom Cyber',
  colors: {
    primary: '#ff0080',
    secondary: '#00d4ff'
  }
})
```

---

### validateTheme

Validate theme configuration and accessibility.

```typescript
function validateTheme(
  theme: Theme,
  options?: {
    checkContrast?: boolean
    checkColorBlindness?: boolean
    strictMode?: boolean
  }
): ValidationResult

interface ValidationResult {
  isValid: boolean
  errors: ValidationError[]
  warnings: ValidationWarning[]
}
```

---

## Bundle Utilities

### lazy

Dynamic component loading for code splitting.

```typescript
function lazy<T>(
  loader: () => Promise<{ default: T }>,
  options?: {
    fallback?: any
    retries?: number
    timeout?: number
  }
): T
```

**Parameters:**
- `loader` - Dynamic import function
- `fallback` - Loading fallback component
- `retries` - Retry attempts on failure
- `timeout` - Load timeout in milliseconds

**Example:**
```svelte
<script>
  import { lazy } from 'bubble-tea-party/utils'
  
  const LazyComponent = lazy(() => import('./HeavyComponent.svelte'), {
    fallback: LoadingSpinner,
    retries: 3
  })
</script>

<svelte:component this={LazyComponent} />
```

---

### bundleSize

Runtime bundle size analysis.

```typescript
interface BundleSizeAPI {
  track(componentName: string): void
  getComponentSize(componentName: string): number
  getTotalSize(): number
  getReport(): BundleReport
}

interface BundleReport {
  totalSize: number
  components: Array<{
    name: string
    size: number
    percentage: number
  }>
}
```

---

## Performance Utilities

### performanceMonitor

Runtime performance monitoring.

```typescript
interface PerformanceMonitor {
  startMeasure(name: string): void
  endMeasure(name: string): number
  getMetrics(): PerformanceMetrics
  clearMetrics(): void
}

interface PerformanceMetrics {
  fps: number
  memoryUsage: number
  renderTime: number
  componentCount: number
}
```

---

## Type Definitions

### Common Types

```typescript
// Color values
type ColorValue = string

// Size variants
type SizeVariant = 'xs' | 'sm' | 'md' | 'lg' | 'xl'

// Component variants
type ComponentVariant = 'default' | 'cyberpunk' | 'neon' | 'ghost' | 'terminal'

// Event handlers
type EventHandler<T = Event> = (event: T) => void

// Svelte component props
type ComponentProps<T> = T extends SvelteComponent<infer P> ? P : never

// Animation config
interface AnimationConfig {
  duration?: number
  easing?: string
  delay?: number
}

// Transition config  
interface TransitionConfig {
  delay?: number
  duration?: number
  easing?: (t: number) => number
  css?: (t: number, u: number) => string
  tick?: (t: number, u: number) => void
}
```

### Store Types

```typescript
// Theme store
interface ThemeStore extends Writable<Theme> {
  registerTheme(theme: Theme): void
  setById(id: string): void
  getAvailable(): Theme[]
}

// Dark mode store
interface DarkModeStore extends Writable<boolean> {
  toggle(): void
  setAuto(enabled: boolean): void
}
```

---

## Error Handling

### ErrorBoundary

Error boundary utilities for robust applications.

```typescript
interface ErrorBoundaryAPI {
  catch(error: Error, componentName?: string): void
  recover(componentName?: string): void
  getErrors(): ErrorReport[]
  clearErrors(): void
}

interface ErrorReport {
  error: Error
  component?: string
  timestamp: Date
  recovered: boolean
}
```

---

All utilities are fully typed and include comprehensive JSDoc documentation for the best developer experience! ðŸ“šâš¡